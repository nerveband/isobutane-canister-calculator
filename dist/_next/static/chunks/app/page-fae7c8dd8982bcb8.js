(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{7833:(e,t,r)=>{Promise.resolve().then(r.bind(r,7732))},7732:(e,t,r)=>{"use strict";r.d(t,{default:()=>K});var s=r(5155),a=r(2115),n=r(3463),l=r(9795);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,l.QP)((0,n.$)(t))}let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:i("rounded-xl border bg-card text-card-foreground shadow",r),...a})});o.displayName="Card";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:i("flex flex-col space-y-1.5 p-6",r),...a})});c.displayName="CardHeader";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:i("font-semibold leading-none tracking-tight",r),...a})});d.displayName="CardTitle",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:i("text-sm text-muted-foreground",r),...a})}).displayName="CardDescription";let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:i("p-6 pt-0",r),...a})});u.displayName="CardContent",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:i("flex items-center p-6 pt-0",r),...a})}).displayName="CardFooter";let m=a.forwardRef((e,t)=>{let{className:r,type:a,...n}=e;return(0,s.jsx)("input",{type:a,className:i("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...n})});m.displayName="Input";var h=r(6195),g=r(1027);let x=(0,g.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),f=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(h.b,{ref:t,className:i(x(),r),...a})});f.displayName=h.b.displayName;let p=(0,g.F)("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),b=a.forwardRef((e,t)=>{let{className:r,variant:a,...n}=e;return(0,s.jsx)("div",{ref:t,role:"alert",className:i(p({variant:a}),r),...n})});b.displayName="Alert",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("h5",{ref:t,className:i("mb-1 font-medium leading-none tracking-tight",r),...a})}).displayName="AlertTitle";let w=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:i("text-sm [&_p]:leading-relaxed",r),...a})});w.displayName="AlertDescription";var j=r(1722);let v=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(j.bL,{className:i("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",r),...a,ref:t,children:(0,s.jsx)(j.zi,{className:i("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})})});v.displayName=j.bL.displayName;let y={100:{empty:Math.round([100,100,98,102,101].reduce((e,t)=>e+t)/5),quarter:Math.round([125,125,123,127,126].reduce((e,t)=>e+t)/5),half:Math.round([150,150,148,152,151].reduce((e,t)=>e+t)/5),threeQuarter:Math.round([175,175,173,177,176].reduce((e,t)=>e+t)/5),full:Math.round([200,200,198,202,201].reduce((e,t)=>e+t)/5)},230:{empty:Math.round([150,150,160,149,135].reduce((e,t)=>e+t)/5),quarter:Math.round([208,208,218,207,193].reduce((e,t)=>e+t)/5),half:Math.round([265,265,275,264,250].reduce((e,t)=>e+t)/5),threeQuarter:Math.round([323,323,333,322,308].reduce((e,t)=>e+t)/5),full:Math.round([380,380,390,379,365].reduce((e,t)=>e+t)/5)},450:{empty:Math.round([210,213,202,195,180].reduce((e,t)=>e+t)/5),quarter:Math.round([323,326,315,308,293].reduce((e,t)=>e+t)/5),half:Math.round([435,438,427,420,405].reduce((e,t)=>e+t)/5),threeQuarter:Math.round([548,551,540,533,518].reduce((e,t)=>e+t)/5),full:Math.round([660,663,652,645,630].reduce((e,t)=>e+t)/5)}},N={"Generic-100":{brand:"Generic/Unknown",fuelWeight:100,weights:[y["100"].empty,y["100"].quarter,y["100"].half,y["100"].threeQuarter,y["100"].full]},"Generic-230":{brand:"Generic/Unknown",fuelWeight:230,weights:[y["230"].empty,y["230"].quarter,y["230"].half,y["230"].threeQuarter,y["230"].full]},"Generic-450":{brand:"Generic/Unknown",fuelWeight:450,weights:[y["450"].empty,y["450"].quarter,y["450"].half,y["450"].threeQuarter,y["450"].full]},"MSR-110":{brand:"MSR",fuelWeight:110,weights:[101,129,156,184,211]},"MSR-227":{brand:"MSR",fuelWeight:227,weights:[147,204,261,317,374]},"MSR-450":{brand:"MSR",fuelWeight:450,weights:[210,323,435,548,660]},"JetBoil-100":{brand:"Jet Boil",fuelWeight:100,weights:[100,125,150,175,200]},"JetBoil-230":{brand:"Jet Boil",fuelWeight:230,weights:[150,208,265,323,380]},"JetBoil-450":{brand:"Jet Boil",fuelWeight:450,weights:[213,326,438,551,663]},"GigaPower-110":{brand:"Giga Power",fuelWeight:110,weights:[103,131,158,186,213]},"GigaPower-220":{brand:"Giga Power",fuelWeight:220,weights:[150,205,260,315,370]},"GSI-110":{brand:"GSI",fuelWeight:110,weights:[101,129,156,184,211]},"GSI-230":{brand:"GSI",fuelWeight:230,weights:[153,211,268,326,383]},"GSI-450":{brand:"GSI",fuelWeight:450,weights:[202,315,427,540,652]},"Optimus-110":{brand:"Energy by Optimus",fuelWeight:110,weights:[90,118,145,173,200]},"Optimus-230":{brand:"Energy by Optimus",fuelWeight:230,weights:[130,188,245,303,360]},"Coleman-240":{brand:"Coleman Performance",fuelWeight:240,weights:[121,181,241,301,361]},"Coleman-440":{brand:"Coleman Performance",fuelWeight:440,weights:[158,268,378,488,598]},"PrimusPower-100":{brand:"Primus Power Gas",fuelWeight:100,weights:[98,123,148,173,198]},"PrimusPower-230":{brand:"Primus Power Gas",fuelWeight:230,weights:[160,218,275,333,390]},"PrimusPower-450":{brand:"Primus Power Gas",fuelWeight:450,weights:[195,308,420,533,645]},"PrimusSummer-100":{brand:"Primus Summer Gas",fuelWeight:100,weights:[102,127,152,177,202]},"PrimusSummer-230":{brand:"Primus Summer Gas",fuelWeight:230,weights:[149,207,264,322,379]},"PrimusSummer-450":{brand:"Primus Summer Gas",fuelWeight:450,weights:[180,293,405,518,630]},"Perune-100":{brand:"Perune",fuelWeight:100,weights:[101,126,151,176,201]},"Perune-230":{brand:"Perune",fuelWeight:230,weights:[135,193,250,308,365]},"ColemanXTREME-240":{brand:"Coleman XTREME",fuelWeight:240,weights:[111,171,231,291,351]},"ColemanXTREME-440":{brand:"Coleman XTREME",fuelWeight:440,weights:[220,330,440,550,660]},"PrimusCold-230":{brand:"Primus Cold Gas",fuelWeight:230,weights:[160,218,275,333,390]},"PrimusCold-450":{brand:"Primus Cold Gas",fuelWeight:450,weights:[195,308,420,533,645]}},k=async()=>Promise.resolve(N),C={"012345678901":"MSR-110","012345678902":"MSR-227","012345678903":"MSR-450","112345678901":"JetBoil-100","112345678902":"JetBoil-230","112345678903":"JetBoil-450","212345678901":"GigaPower-110","212345678902":"GigaPower-220","312345678901":"GSI-110","312345678902":"GSI-230","312345678903":"GSI-450","412345678901":"Optimus-110","412345678902":"Optimus-230","512345678901":"Coleman-240","512345678902":"Coleman-440","512345678903":"ColemanXTREME-240","512345678904":"ColemanXTREME-440","612345678901":"PrimusPower-100","612345678902":"PrimusPower-230","612345678903":"PrimusPower-450","612345678904":"PrimusSummer-100","612345678905":"PrimusSummer-230","612345678906":"PrimusSummer-450","612345678907":"PrimusCold-230","612345678908":"PrimusCold-450","712345678901":"Perune-100","712345678902":"Perune-230"},P=async e=>{let t=await k(),r=C[e];return r&&t[r]?t[r]:null},W=e=>{let{activeTab:t,onTabChange:r,showBarcodeTab:a=!1}=e;return(0,s.jsx)("div",{className:"flex justify-center mb-4",children:(0,s.jsxs)("nav",{className:"flex space-x-1 rounded-lg bg-muted p-1",children:[(0,s.jsx)("button",{onClick:()=>r("calculator"),className:"flex items-center justify-center rounded-md px-3 py-1.5 text-sm font-medium transition-all\n            ".concat("calculator"===t?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:bg-background/50 hover:text-foreground"),children:"Calculator"}),a&&(0,s.jsx)("button",{onClick:()=>r("barcode"),className:"flex items-center justify-center rounded-md px-3 py-1.5 text-sm font-medium transition-all\n              ".concat("barcode"===t?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:bg-background/50 hover:text-foreground"),children:"Weight Input"}),(0,s.jsx)("button",{onClick:()=>r("about"),className:"flex items-center justify-center rounded-md px-3 py-1.5 text-sm font-medium transition-all\n            ".concat("about"===t?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:bg-background/50 hover:text-foreground"),children:"About"})]})})};var S=r(3475),R=r(5713),E=r(2187),M=r(1234),F=r(5548),A=r(9962);let G=()=>(0,s.jsxs)(o,{className:"w-full max-w-4xl mx-auto",children:[(0,s.jsx)(c,{className:"p-4 sm:p-6",children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(S.A,{className:"w-6 h-6 text-orange-500 shrink-0"}),(0,s.jsx)(d,{className:"text-lg sm:text-xl font-bold",children:"About the Isobutane Calculator"})]})}),(0,s.jsxs)(u,{className:"p-4 sm:p-6 space-y-6",children:[(0,s.jsxs)("section",{className:"space-y-3",children:[(0,s.jsxs)("h2",{className:"text-base sm:text-lg font-semibold flex items-center space-x-2",children:[(0,s.jsx)(R.A,{className:"w-5 h-5 text-orange-500 shrink-0"}),(0,s.jsx)("span",{children:"What is this tool?"})]}),(0,s.jsx)("p",{className:"text-sm sm:text-base text-gray-600",children:"The Isobutane Canister Calculator is a free tool that helps outdoor enthusiasts accurately measure the remaining fuel in their isobutane canisters. Whether you're planning a backpacking trip or just want to know if you need a new canister, this calculator provides precise measurements for a wide range of canister brands and sizes."})]}),(0,s.jsxs)("section",{className:"space-y-3",children:[(0,s.jsxs)("h2",{className:"text-base sm:text-lg font-semibold flex items-center space-x-2",children:[(0,s.jsx)(E.A,{className:"w-5 h-5 text-orange-500 shrink-0"}),(0,s.jsx)("span",{children:"How to Use"})]}),(0,s.jsxs)("ol",{className:"list-decimal list-inside space-y-2 text-sm sm:text-base text-gray-600",children:[(0,s.jsx)("li",{children:"Select your canister brand from the available options"}),(0,s.jsx)("li",{children:"Choose your specific canister model"}),(0,s.jsx)("li",{children:"Enter the current weight of your canister (in grams or ounces)"}),(0,s.jsx)("li",{children:"View the remaining fuel amount and percentage"})]}),(0,s.jsx)("p",{className:"text-sm sm:text-base text-gray-600",children:"The calculator will automatically validate your input and warn you if the weight is outside the expected range for your canister."})]}),(0,s.jsxs)("section",{className:"space-y-3",children:[(0,s.jsxs)("h2",{className:"text-base sm:text-lg font-semibold flex items-center space-x-2",children:[(0,s.jsx)(M.A,{className:"w-5 h-5 text-orange-500 shrink-0"}),(0,s.jsx)("span",{children:"Data Source"})]}),(0,s.jsxs)("p",{className:"text-sm sm:text-base text-gray-600",children:["The weight data used in this calculator is sourced from"," ",(0,s.jsx)("a",{href:"https://bantamoutdoors.com/wp-content/uploads/2023/02/Isobutane-Canister-Weight-Table-g.pdf",target:"_blank",rel:"noopener noreferrer",className:"text-orange-500 hover:text-orange-600",children:"Bantam Outdoors"}),". We maintain an extensive database of canister specifications to ensure accurate calculations."]})]}),(0,s.jsxs)("section",{className:"space-y-3",children:[(0,s.jsxs)("h2",{className:"text-base sm:text-lg font-semibold flex items-center space-x-2",children:[(0,s.jsx)(F.A,{className:"w-5 h-5 text-orange-500 shrink-0"}),(0,s.jsx)("span",{children:"Contributing"})]}),(0,s.jsxs)("p",{className:"text-sm sm:text-base text-gray-600",children:["Have data for a canister brand or model that's not listed? Please email"," ",(0,s.jsx)("a",{href:"mailto:hello@ashrafali.net",className:"text-orange-500 hover:text-orange-600",children:"hello@ashrafali.net"})," ","with the following information:"]}),(0,s.jsxs)("ul",{className:"list-disc list-inside space-y-1 text-sm sm:text-base text-gray-600 ml-4",children:[(0,s.jsx)("li",{children:"Brand name"}),(0,s.jsx)("li",{children:"Model name/number"}),(0,s.jsx)("li",{children:"Empty canister weight"}),(0,s.jsx)("li",{children:"Full canister weight"}),(0,s.jsx)("li",{children:"Fuel capacity"}),(0,s.jsx)("li",{children:"Source of information"})]})]}),(0,s.jsxs)("section",{className:"space-y-3",children:[(0,s.jsxs)("h2",{className:"text-base sm:text-lg font-semibold flex items-center space-x-2",children:[(0,s.jsx)(A.A,{className:"w-5 h-5 text-orange-500 shrink-0"}),(0,s.jsx)("span",{children:"Privacy"})]}),(0,s.jsx)("p",{className:"text-sm sm:text-base text-gray-600",children:"This calculator works entirely in your browser. No data is collected or stored on any servers."})]})]})]});var I=r(8012),z=r(1068),T=r(380),O=r(7661),B=r(4391),D=r(9523),_=r(6936),V=r(123),U=r(2317);let J=(0,g.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),L=a.forwardRef((e,t)=>{let{className:r,variant:a,size:n,asChild:l=!1,...o}=e,c=l?U.DX:"button";return(0,s.jsx)(c,{className:i(J({variant:a,size:n,className:r})),ref:t,...o})});L.displayName="Button";var q=r(9022),Q=r(5083),X=r.n(Q);let H=e=>{let{onBarcodeDetected:t,onOCRResult:r}=e,n=a.useRef(null),[l,i]=a.useState(null),[o,c]=a.useState(!1),[d,u]=a.useState(!1),[m,h]=a.useState(!1),[g,x]=a.useState(!1),[p,j]=a.useState(!1),y=a.useRef(null),N=a.useRef(null),k=a.useRef(null);a.useEffect(()=>(y.current=new V.sx,()=>{F(),k.current&&clearInterval(k.current)}),[]),a.useEffect(()=>()=>{N.current&&(N.current.getTracks().forEach(e=>e.stop()),N.current=null),k.current&&clearInterval(k.current)},[]);let C=async e=>{j(!0);try{let a="string"==typeof e?e:URL.createObjectURL(e);try{var s;let e=await (null===(s=y.current)||void 0===s?void 0:s.decodeFromImageUrl(a));e&&(t(e.getText()),i(null))}catch(s){let{data:{text:t}}=await X().recognize(e,"eng",{logger:e=>console.log(e)});t.trim()?(r(t),i(null)):i("No barcode or readable text found in image.")}}catch(e){console.error("Error processing image:",e),i("Could not process image. Please try again.")}finally{j(!1),"string"==typeof e&&URL.revokeObjectURL(e)}},{getRootProps:P,getInputProps:W,isDragActive:S}=(0,q.VB)({accept:{"image/*":[]},onDrop:async e=>{e.length>0&&await C(e[0])}}),R=async()=>{try{let e=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});N.current=e,h(!0),i(null),u(!0)}catch(e){e instanceof DOMException&&"NotAllowedError"===e.name?i("Camera access was denied. Please grant camera permissions to use the camera."):i("Could not access camera. Please ensure your device has a working camera."),h(!1),u(!1),console.error("Error requesting camera permission:",e)}},E=async()=>{if(y.current&&n.current&&m)try{if(c(!0),i(null),!N.current){let e=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1280},height:{ideal:720}}});N.current=e}if(n.current){n.current.srcObject=N.current;try{await n.current.play()}catch(e){throw console.error("Error playing video:",e),e}}await y.current.decodeFromVideoDevice(void 0,n.current,(e,r)=>{var s;e&&(t(e.getText()),g||F()),!r||r instanceof TypeError||(null===(s=r.message)||void 0===s?void 0:s.includes("No MultiFormat Readers"))||console.error("Barcode scanning error:",r)}),g&&M()}catch(e){i("Could not start scanning. Please try again."),console.error("Error starting scanner:",e),F()}},M=()=>{if(!n.current||k.current)return;let e=document.createElement("canvas"),t=e.getContext("2d");k.current=setInterval(async()=>{if(n.current&&t&&o)try{e.width=n.current.videoWidth,e.height=n.current.videoHeight,t.drawImage(n.current,0,0);let{data:{text:s}}=await X().recognize(e,"eng",{logger:e=>console.log(e)});s.trim()&&r(s)}catch(e){console.error("OCR error:",e)}},2e3)},F=()=>{try{N.current&&(N.current.getTracks().forEach(e=>e.stop()),N.current=null),n.current&&(n.current.srcObject=null),y.current&&(y.current=new V.sx),k.current&&(clearInterval(k.current),k.current=null)}catch(e){console.error("Error stopping scanner:",e)}c(!1)};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(v,{id:"live-ocr",checked:g,onCheckedChange:x,className:"data-[state=checked]:bg-orange-500"}),(0,s.jsx)(f,{htmlFor:"live-ocr",className:"text-sm",children:"Enable Live Weight Detection"})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold",children:"Camera Scanner"}),l?(0,s.jsx)(b,{variant:"destructive",children:(0,s.jsx)(w,{children:l})}):d?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"relative aspect-video bg-muted rounded-lg overflow-hidden",children:(0,s.jsx)("video",{ref:n,className:"w-full h-full object-cover",playsInline:!0,muted:!0,autoPlay:!1})}),o?(0,s.jsx)(L,{onClick:F,variant:"destructive",className:"w-full",children:"Stop Scanning"}):(0,s.jsx)(L,{onClick:E,className:"w-full",children:"Start Scanning"})]}):(0,s.jsx)(L,{onClick:R,className:"w-full",children:"Start Camera"})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold",children:"Image Upload"}),(0,s.jsxs)("div",{...P(),className:"\n              flex flex-col items-center justify-center w-full p-6 border-2 border-dashed \n              rounded-lg cursor-pointer transition-colors min-h-[200px]\n              ".concat(S?"border-orange-500 bg-orange-50":"border-gray-300 hover:border-orange-500","\n              ").concat(p?"opacity-50 pointer-events-none":"","\n            "),children:[(0,s.jsx)("input",{...W()}),(0,s.jsx)("p",{className:"text-sm text-center text-gray-600",children:p?"Processing...":S?"Drop the image here...":"Drag and drop an image here, or click to select"})]})]})]})]})},$={BARCODE_SCANNING:!1},K=()=>{var e;let[t,r]=(0,a.useState)(""),[n,l]=(0,a.useState)(""),[i,h]=(0,a.useState)(""),[g,x]=(0,a.useState)(!1),[p,j]=(0,a.useState)(null),[y,N]=(0,a.useState)(null),[C,R]=(0,a.useState)(null),[E,M]=(0,a.useState)("calculator"),[F,A]=(0,a.useState)(null);(0,a.useEffect)(()=>{if(!i||!p||!t){N(null),R(null);return}let e=q(t,p[i]);N(e.error||null),R(e.warning||null)},[t,i,p,g]),(0,a.useEffect)(()=>{h("")},[n]),(0,a.useEffect)(()=>{k().then(e=>{j(e)})},[]);let V=(0,a.useMemo)(()=>{if(!p)return{};let e={};return Object.entries(p).forEach(t=>{let[r,s]=t;e[s.brand]||(e[s.brand]=[]),e[s.brand].push({id:r,fuelWeight:s.fuelWeight})}),e},[p]),U=(0,a.useMemo)(()=>Object.keys(V).sort(),[V]),J=e=>(e/28.35).toFixed(2),L=e=>(28.35*e).toFixed(1),q=(e,t)=>{if(!e)return{isValid:!1,error:"Please enter a weight"};let r=g?parseFloat(L(parseFloat(e))):parseFloat(e);if(isNaN(r))return{isValid:!1,error:"Please enter a valid number"};let s=t.weights[0],a=t.weights[t.weights.length-1];return r<.9*s?{isValid:!1,error:"Weight too low: ".concat(g?J(r):r).concat(g?"oz":"g"," is below minimum empty weight (").concat(g?J(s):s).concat(g?"oz":"g",")")}:r>1.1*a?{isValid:!1,error:"Weight too high: ".concat(g?J(r):r).concat(g?"oz":"g"," is above maximum full weight (").concat(g?J(a):a).concat(g?"oz":"g",")")}:r<s?{isValid:!0,warning:"Weight ".concat(g?J(r):r).concat(g?"oz":"g"," is slightly below empty weight (").concat(g?J(s):s).concat(g?"oz":"g","). Please verify your measurement.")}:r>a?{isValid:!0,warning:"Weight ".concat(g?J(r):r).concat(g?"oz":"g"," is slightly above full weight (").concat(g?J(a):a).concat(g?"oz":"g","). Please verify your measurement.")}:{isValid:!0}},Q=(e,t)=>{if(!e||!t)return null;let r=q(e,t);if(N(r.error||null),R(r.warning||null),!r.isValid)return null;let s=g?parseFloat(L(parseFloat(e))):parseFloat(e),a=[0,25,50,75,100],n=t.weights;if(s<=n[0])return 0;if(s>=n[n.length-1])return 100;for(let e=0;e<n.length-1;e++)if(s>=n[e]&&s<=n[e+1]){let t=n[e+1]-n[e],r=a[e+1]-a[e],l=s-n[e];return a[e]+l/t*r}return null},X=(0,a.useMemo)(()=>{if(!i||!t||!p)return null;let e=p[i];if(!e)return null;let r=Q(t,e);if(null===r)return null;let s=e.weights[0],a=e.weights[e.weights.length-1],n=Math.max(0,parseFloat(g?L(parseFloat(t)):t)-s);return{percentage:r.toFixed(1),remainingFuel:g?J(n):n.toFixed(1),emptyWeight:g?J(s):s,totalFuel:g?J(e.fuelWeight):e.fuelWeight,fullWeight:g?J(a):a}},[i,t,g,p]),K=async e=>{try{let r=await P(e);if(r){var t;l(r.brand);let e=null===(t=Object.entries(p||{}).find(e=>{let[t,s]=e;return s.brand===r.brand&&s.fuelWeight===r.fuelWeight}))||void 0===t?void 0:t[0];e&&h(e)}else N("Canister not found for this barcode. Please select manually.")}catch(e){console.error("Error processing barcode:",e),N("Failed to process barcode. Please select canister manually.")}};return p?(0,s.jsxs)("div",{className:"w-full max-w-7xl mx-auto px-1 sm:px-6 lg:px-8 py-1 sm:py-8",children:[(0,s.jsx)(W,{activeTab:E,onTabChange:M,showBarcodeTab:$.BARCODE_SCANNING}),"about"===E?(0,s.jsx)(G,{}):"barcode"===E&&$.BARCODE_SCANNING?(0,s.jsxs)(o,{className:"w-full max-w-4xl mx-auto",children:[(0,s.jsx)(c,{className:"p-2 sm:p-6",children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(I.A,{className:"w-6 h-6 text-orange-500"}),(0,s.jsx)(d,{className:"text-xl font-bold",children:"Barcode Scanner & Weight Input"})]})}),(0,s.jsx)(u,{className:"p-2 sm:p-6",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Scan your canister's barcode to automatically select the correct brand and model, or use the camera/image upload to read the weight from your scale."}),(0,s.jsx)(H,{onBarcodeDetected:K,onOCRResult:e=>{let t=e.match(/\d+(\.\d+)?/);t?(r(t[0]),A(null)):A("No valid weight detected in the image. Please try again.")}}),F&&(0,s.jsxs)(b,{variant:"destructive",children:[(0,s.jsx)(z.A,{className:"h-4 w-4"}),(0,s.jsx)(w,{children:F})]})]})})]}):(0,s.jsxs)(o,{className:"w-full max-w-4xl mx-auto",children:[(0,s.jsx)(c,{className:"p-2 sm:p-6",children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-2 sm:space-y-0",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(S.A,{className:"w-6 h-6 text-orange-500"}),(0,s.jsx)(d,{className:"text-xl font-bold",children:"Isobutane Calculator"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(f,{htmlFor:"unit-toggle",className:"text-sm",children:"g"}),(0,s.jsx)(v,{id:"unit-toggle",checked:g,onCheckedChange:x,className:"data-[state=checked]:bg-orange-500"}),(0,s.jsx)(f,{htmlFor:"unit-toggle",className:"text-sm",children:"oz"})]})]})}),(0,s.jsx)(u,{className:"p-2 sm:p-6",children:(0,s.jsxs)("div",{className:"space-y-3 sm:space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)(f,{className:"mb-2 block flex items-center space-x-2",children:[(0,s.jsx)(T.A,{className:"w-4 h-4 text-orange-500"}),(0,s.jsx)("span",{children:"Select Brand"})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 xs:grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-1.5 sm:gap-2",children:U.map(e=>(0,s.jsx)("button",{onClick:()=>l(e),className:"p-2 text-sm rounded-md border transition-colors\n                        ".concat(n===e?"bg-orange-500 text-white border-orange-500":"border-orange-200 hover:border-orange-500"),children:e},e))})]}),n&&(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)(f,{className:"mb-2 block flex items-center space-x-2",children:[(0,s.jsx)(O.A,{className:"w-4 h-4 text-orange-500"}),(0,s.jsx)("span",{children:"Model"})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-1.5 sm:gap-2",children:null===(e=V[n])||void 0===e?void 0:e.map(e=>{let{id:t,fuelWeight:r}=e;return(0,s.jsxs)("button",{onClick:()=>h(t),className:"p-2 text-sm rounded-md border transition-colors text-left\n                          ".concat(i===t?"bg-orange-500 text-white border-orange-500":"border-orange-200 hover:border-orange-500"),children:[g?J(r):r,g?"oz":"g"," canister"]},t)})})]}),i&&(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)(f,{className:"mb-2 block flex items-center space-x-2",children:[(0,s.jsx)(B.A,{className:"w-4 h-4 text-orange-500"}),(0,s.jsxs)("span",{children:["Current Weight (",g?"oz":"g",")"]})]}),(0,s.jsx)(m,{type:"number",step:"0.1",value:t,onChange:e=>r(e.target.value),placeholder:"Enter weight in ".concat(g?"ounces":"grams"),className:"w-full"})]}),y&&(0,s.jsxs)(b,{className:"border-red-500 bg-red-50 text-red-800 text-sm",children:[(0,s.jsx)(z.A,{className:"w-4 h-4 shrink-0"}),(0,s.jsx)(w,{children:y})]}),C&&!y&&(0,s.jsxs)(b,{className:"border-yellow-500 bg-yellow-50 text-yellow-800 text-sm",children:[(0,s.jsx)(z.A,{className:"w-4 h-4 shrink-0"}),(0,s.jsx)(w,{children:C})]}),X&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"bg-orange-50 p-3 sm:p-4 rounded-lg",children:[(0,s.jsxs)("h3",{className:"font-semibold mb-2 flex items-center space-x-2 text-sm sm:text-base",children:[(0,s.jsx)(D.A,{className:"w-4 h-4 text-orange-500 shrink-0"}),(0,s.jsx)("span",{children:"Canister Details"})]}),(0,s.jsxs)("p",{className:"text-sm font-medium text-gray-900 mb-2",children:[p[i].brand," - ",g?J(p[i].fuelWeight):p[i].fuelWeight,g?"oz":"g"," canister"]}),(0,s.jsxs)("div",{className:"space-y-1 text-xs sm:text-sm",children:[(0,s.jsxs)("p",{className:"text-gray-600",children:["Empty Weight: ",X.emptyWeight,g?"oz":"g"]}),(0,s.jsxs)("p",{className:"text-gray-600",children:["Total Fuel When Full: ",X.totalFuel,g?"oz":"g"]}),(0,s.jsxs)("p",{className:"text-gray-600",children:["Total Weight When Full: ",X.fullWeight,g?"oz":"g"]})]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"font-semibold mb-1 flex items-center space-x-2 text-sm sm:text-base",children:[(0,s.jsx)(S.A,{className:"w-4 h-4 text-orange-500 shrink-0"}),(0,s.jsx)("span",{children:"Remaining Fuel"})]}),(0,s.jsxs)("p",{className:"text-xl sm:text-2xl font-bold text-orange-500",children:[X.remainingFuel,g?"oz":"g"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"font-semibold mb-1 flex items-center space-x-2 text-sm sm:text-base",children:[(0,s.jsx)(_.A,{className:"w-4 h-4 text-orange-500 shrink-0"}),(0,s.jsx)("span",{children:"Fuel Percentage"})]}),(0,s.jsxs)("div",{className:"relative pt-1",children:[(0,s.jsx)("div",{className:"flex mb-2 items-center justify-between",children:(0,s.jsx)("div",{children:(0,s.jsxs)("span",{className:"text-xl sm:text-2xl font-bold text-orange-500",children:[X.percentage,"%"]})})}),(0,s.jsx)("div",{className:"overflow-hidden h-2 mb-4 text-xs flex rounded bg-orange-100",children:(0,s.jsx)("div",{style:{width:"".concat(X.percentage,"%")},className:"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-orange-500"})})]})]})]})]})]})}),(0,s.jsxs)("div",{className:"text-center p-2 sm:p-4 text-xs sm:text-sm text-gray-500",children:["Made by ",(0,s.jsx)("a",{href:"https://ashrafali.net",target:"_blank",rel:"noopener noreferrer",className:"text-orange-500 hover:text-orange-600",children:"Ashraf Ali"})]})]})]}):(0,s.jsx)("div",{children:"Loading canister data..."})}}},e=>{var t=t=>e(e.s=t);e.O(0,[840,441,517,358],()=>t(7833)),_N_E=e.O()}]);